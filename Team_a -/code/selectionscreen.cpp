//====================================================================================================
//
// キャラ選択画面処理 (SelectionScreen.cpp)
// Author  Kimura Kouta
//
//====================================================================================================
#include"selectionscreen.h"
#include"manager.h"
#include"renderer.h"
#include"input.h"
#include"keybord.h"
#include "SelectIcon.h"
#include "light.h"

//====================================================================================================
// マクロ定義
//==================================================================================================== 

//=====================================================================================================
// 前方宣言初期化
//=====================================================================================================
CManager *CSelectionScreen::m_pManager = NULL;
CLight*CSelectionScreen::m_pLight = NULL;
CSelectIcon::ICON CSelectionScreen::m_Icon = {};

//================================================================================================
// コンストラクタ
//=================================================================================================
CSelectionScreen::CSelectionScreen()
{

}

//================================================================================================
// デストラクタ
//=================================================================================================
CSelectionScreen::~CSelectionScreen()
{

}

//================================================================================================
// 背景の初期化
//=================================================================================================
HRESULT CSelectionScreen::Init(void)
{
	m_pLight = CLight::Create();

	CSelectIcon::Load();
	float pos = 0;
	for (int nCnt = 0; nCnt < 4; nCnt++)
	{
		CSelectIcon::Create(D3DXVECTOR3(pos, 0.0f, 0.0f), (CSelectIcon::ICON)nCnt);
		pos += 100.0f;
	}
	
	return S_OK;

}

//================================================================================================
// 背景の開放処理
//=================================================================================================
void CSelectionScreen::Uninit(void)
{
	CSelectIcon::Unload();
}

//================================================================================================
// 背景の更新処理
//=================================================================================================
void CSelectionScreen::Update(void)
{
	CKeybord *pKetybord = CManager::GetKeybord();

	if (CFade::GetFade() == CFade::FADE_NONE)
	{
		if (pKetybord->GetKeyboardTrigger(DIK_RETURN))
		{
			CFade::SetFade(m_pManager->MODE_GAME);
		}
	}
}

//================================================================================================
// 背景の描画処理
//=================================================================================================
void CSelectionScreen::Draw(void)
{

}

//================================================================================================
// タイトル処理
//================================================================================================
CSelectionScreen * CSelectionScreen::Create(void)
{
	CSelectionScreen *pSelectionScreen;

	pSelectionScreen = new CSelectionScreen();

	pSelectionScreen->Init();

	return pSelectionScreen;
}